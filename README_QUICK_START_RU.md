# üè• Klinika Pro PACS - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –ë—ã—Å—Ç—Ä–æ–º—É –ó–∞–ø—É—Å–∫—É

## üöÄ –ë—ã—Å—Ç—Ä–∞—è –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Docker & Docker Compose
- 8–ì–ë+ –û–ó–£
- 100–ì–ë+ —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –¥–∏—Å–∫–æ–≤–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ó–∞–ø—É—Å–∫
```bash
git clone <repository>
cd ort_ohif1
docker-compose up -d
```

### 2. –î–æ—Å—Ç—É–ø –∫ –°–∏—Å—Ç–µ–º–µ
- **–û—Å–Ω–æ–≤–Ω–æ–µ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**: https://localhost
- **–°—Ç—Ä–∞–Ω–∏—Ü–∞ –í—Ö–æ–¥–∞**: https://localhost/login

### 3. –£—á–µ—Ç–Ω—ã–µ –î–∞–Ω–Ω—ã–µ –ø–æ –£–º–æ–ª—á–∞–Ω–∏—é
```
–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä: admin / admin
–í—Ä–∞—á:          doctor / doctor  
–û–ø–µ—Ä–∞—Ç–æ—Ä:      operator / operator
```

## üèóÔ∏è –û–±–∑–æ—Ä –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

```
–ò–Ω—Ç–µ—Ä–Ω–µ—Ç ‚Üí Nginx –ü—Ä–æ–∫—Å–∏ ‚Üí OHIF Viewer
                       ‚Üí Flask Auth API
                       ‚Üí Orthanc DICOM Server ‚Üí PostgreSQL
```

## üìã –ö–ª—é—á–µ–≤—ã–µ –§—É–Ω–∫—Ü–∏–∏

‚úÖ **–ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è**: DICOM –ø—Ä–æ—Å–º–æ—Ç—Ä—â–∏–∫ —Å MPR, 3D —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–æ–º  
‚úÖ **–†–æ–ª–µ–≤–æ–π –î–æ—Å—Ç—É–ø**: –†–æ–ª–∏ –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä, –í—Ä–∞—á, –û–ø–µ—Ä–∞—Ç–æ—Ä  
‚úÖ **–ú–Ω–æ–≥–æ—è–∑—ã—á–Ω–æ—Å—Ç—å**: –ê–Ω–≥–ª–∏–π—Å–∫–∏–π, –†—É—Å—Å–∫–∏–π, –ò—Å–ø–∞–Ω—Å–∫–∏–π, –§—Ä–∞–Ω—Ü—É–∑—Å–∫–∏–π, –ù–µ–º–µ—Ü–∫–∏–π  
‚úÖ **–°–∏—Å—Ç–µ–º–∞ –û—Ç—á–µ—Ç–æ–≤**: –°–æ–∑–¥–∞–Ω–∏–µ, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, —ç–∫—Å–ø–æ—Ä—Ç PDF –æ—Ç—á–µ—Ç–æ–≤  
‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è, SSL/TLS, –∞—É–¥–∏—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ  
‚úÖ **–°—Ç–∞–Ω–¥–∞—Ä—Ç—ã**: –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ DICOM 3.0, DICOMweb  

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –°—Ç–µ–∫

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|-----------|------------|---------|
| –§—Ä–æ–Ω—Ç–µ–Ω–¥ | OHIF Viewer v3 + React | –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π |
| –ë—ç–∫–µ–Ω–¥ | Orthanc DICOM Server | –•—Ä–∞–Ω–µ–Ω–∏–µ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö |
| –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è | Flask + Python | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ RBAC |
| –ë–∞–∑–∞ –î–∞–Ω–Ω—ã—Ö | PostgreSQL 15 | –ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö |
| –ü—Ä–æ–∫—Å–∏ | Nginx | SSL —Ç–µ—Ä–º–∏–Ω–∞—Ü–∏—è –∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è |
| –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä | Docker Compose | –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤ |

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ü—Ä–æ–µ–∫—Ç–∞

```
ort_ohif1/
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îú‚îÄ‚îÄ ohif/              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏–∏ OHIF
‚îÇ   ‚îú‚îÄ‚îÄ nginx/             # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è reverse proxy  
‚îÇ   ‚îú‚îÄ‚îÄ orthanc/           # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ DICOM —Å–µ—Ä–≤–µ—Ä–∞
‚îÇ   ‚îî‚îÄ‚îÄ ssl/               # SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
‚îú‚îÄ‚îÄ flask_auth_service/    # Python —Å–µ—Ä–≤–∏—Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ docker-compose.yml     # –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
‚îú‚îÄ‚îÄ TECH_STACK_RU.md      # –ü–æ–¥—Ä–æ–±–Ω–∞—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îî‚îÄ‚îÄ README_QUICK_START_RU.md # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

## üîë –ö–ª—é—á–µ–≤—ã–µ –°–µ—Ä–≤–∏—Å—ã

### OHIF Viewer (–ü–æ—Ä—Ç 3000)
- –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ –≤—Ä–∞—á–µ–±–Ω—ã—Ö –æ—Ç—á–µ—Ç–æ–≤ (1900+ —Å—Ç—Ä–æ–∫ JS)
- –ú–Ω–æ–≥–æ—è–∑—ã—á–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞
- –†–æ–ª–µ–≤—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã UI

### Orthanc DICOM (–ü–æ—Ä—Ç 8042)
- DICOM 3.0 —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π —Å–µ—Ä–≤–µ—Ä
- DICOMweb REST API
- PostgreSQL –±—ç–∫–µ–Ω–¥
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ø–ª–∞–≥–∏–Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

### Flask Auth (–ü–æ—Ä—Ç 5001)
- JWT —Ç–æ–∫–µ–Ω –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- –†–æ–ª–µ–≤–æ–π –∫–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞
- API —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–µ—Å—Å–∏–π

### Nginx –ü—Ä–æ–∫—Å–∏ (–ü–æ—Ä—Ç 443/80)
- SSL —Ç–µ—Ä–º–∏–Ω–∞—Ü–∏—è
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–∞–º–∏  
- –ó–∞–≥–æ–ª–æ–≤–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- –û–±—Ä–∞–±–æ—Ç–∫–∞ CORS

## üß™ –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –î–æ–±–∞–≤–∏—Ç—å –¢–µ—Å—Ç–æ–≤—ã–µ –î–∞–Ω–Ω—ã–µ
```bash
./upload.sh                    # –ó–∞–≥—Ä—É–∑–∏—Ç—å –æ–±—Ä–∞–∑—Ü—ã DICOM —Ñ–∞–π–ª–æ–≤
./download_test_dicom.sh       # –°–∫–∞—á–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ –Ω–∞–±–æ—Ä—ã –¥–∞–Ω–Ω—ã—Ö
```

### –õ–æ–≥–∏ –∏ –û—Ç–ª–∞–¥–∫–∞
```bash
docker-compose logs -f ohif_viewer    # –õ–æ–≥–∏ OHIF
docker-compose logs -f orthanc        # –õ–æ–≥–∏ DICOM —Å–µ—Ä–≤–µ—Ä–∞  
docker-compose logs -f flask_auth_service  # –õ–æ–≥–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
```

### –î–æ—Å—Ç—É–ø –∫ –ë–∞–∑–µ –î–∞–Ω–Ω—ã—Ö
```bash
# –î–æ—Å—Ç—É–ø –∫ PostgreSQL
docker-compose exec db_pacs psql -U postgres -d orthanc

# –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
docker-compose exec flask_auth_service python create_admin_user.py
```

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –û–∫—Ä—É–∂–µ–Ω–∏—è
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `docker-compose.yml` –¥–ª—è –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã—Ö –æ–ø—Ü–∏–π
- SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –≤ `config/ssl/`
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤ Flask —Å–µ—Ä–≤–∏—Å–µ

### –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è
- –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å OHIF: `config/ohif/customizations.js`
- –ü–µ—Ä–µ–≤–æ–¥—ã: –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –≤ customizations.js
- –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è: `config/nginx/nginx.conf`

## üìã –û–±—â–∏–µ –ó–∞–¥–∞—á–∏

### –°–±—Ä–æ—Å –ü–∞—Ä–æ–ª—è –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
```bash
docker-compose exec flask_auth_service python create_admin_user.py
```

### –†–µ–∑–µ—Ä–≤–Ω–æ–µ –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –°–∏—Å—Ç–µ–º—ã
```bash
./backup.sh    # –°–æ–∑–¥–∞–µ—Ç –ø–æ–ª–Ω—É—é —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é —Å–∏—Å—Ç–µ–º—ã
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
```bash
# –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
docker-compose restart ohif_viewer
docker-compose restart nginx
```

## üÜò –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ù–µ–ø–æ–ª–∞–¥–æ–∫

### –ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã –ü–æ—Ä—Ç–æ–≤
```bash
sudo lsof -ti:443 | xargs kill -9  # –ó–∞–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å –Ω–∞ –ø–æ—Ä—Ç—É 443
sudo lsof -ti:80 | xargs kill -9   # –ó–∞–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å –Ω–∞ –ø–æ—Ä—Ç—É 80
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏
```bash
docker-compose down --volumes    # –ü–æ–ª–Ω—ã–π —Å–±—Ä–æ—Å
docker-compose up -d            # –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π
```bash
# –û—á–∏—Å—Ç–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –±—Ä–∞—É–∑–µ—Ä–∞ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
docker-compose restart flask_auth_service
```

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–î–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ —Å–º–æ—Ç—Ä–∏—Ç–µ: **TECH_STACK_RU.md**

---

**–ü—Ä–æ–µ–∫—Ç**: Klinika Pro PACS v1.0  
**–ê–≤—Ç–æ—Ä**: Tim Hunt (tr00x)  
**–û–±–Ω–æ–≤–ª–µ–Ω–æ**: –î–µ–∫–∞–±—Ä—å 2024  
**–õ–∏—Ü–µ–Ω–∑–∏—è**: –ü—Ä–æ–ø—Ä–∏–µ—Ç–∞—Ä–Ω–∞—è 