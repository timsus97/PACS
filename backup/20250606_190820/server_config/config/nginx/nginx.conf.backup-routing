user nginx; worker_processes auto; pid /var/run/nginx.pid; events { worker_connections 1024; } http { include /etc/nginx/mime.types; default_type application/octet-stream; sendfile on; keepalive_timeout 65; server { listen 80; server_name srv853233.hstgr.cloud; return 301 https://$server_name$request_uri; } server { listen 443 ssl; server_name srv853233.hstgr.cloud; ssl_certificate /etc/nginx/ssl/nginx.crt; ssl_certificate_key /etc/nginx/ssl/nginx.key; ssl_protocols TLSv1.2 TLSv1.3; location = /login { proxy_pass http://pacs_flask_auth:5000/login; proxy_set_header Host $host; } location ^~ /api { proxy_pass http://pacs_flask_auth:5000; proxy_set_header Host $host; } location ^~ /orthanc/dicom-web/ { add_header Access-Control-Allow-Origin "*" always; add_header Access-Control-Allow-Methods "GET, POST, OPTIONS" always; add_header Access-Control-Allow-Headers "Content-Type, Authorization" always; if ($request_method = OPTIONS) { return 204; } proxy_pass http://pacs_orthanc:8042/dicom-web/; proxy_set_header Host $host; proxy_read_timeout 300; proxy_connect_timeout 300; } location ^~ /orthanc { proxy_pass http://pacs_orthanc:8042; proxy_set_header Host $host; } location / { proxy_pass http://pacs_ohif_viewer:80; proxy_set_header Host $host; } } }
